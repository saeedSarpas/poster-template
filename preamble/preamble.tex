% Fonts
\usepackage{fontspec}
\setmainfont[
  Path=./fonts/PT_Sans/,
  BoldFont={PT_Sans-Web-Bold},
  ItalicFont={PT_Sans-Web-Italic},
  BoldItalicFont={PT_Sans-Web-BoldItalic}
]{PT_Sans-Web-Regular.ttf}

% Colors and colour gradients
\input{preamble/colors}

% Graphics
\usepackage{graphicx}
\graphicspath{
  {./assets/}
}

% Geometry
\usepackage{geometry}
\geometry{
  left=20mm,
  top=20mm,
  right=20mm,
  bottom=20mm
}

% PS line and shape drawing
\usepackage{tikz}

% Array package
\usepackage{array}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\setlength{\tabcolsep}{0.1\linewidth}

% Wrapping text around figures
\usepackage{wrapfig}

% Math
\usepackage{unicode-math}

% Multirow
\usepackage{multirow}

% Line control (spacing, ...)
\usepackage{setspace}
\renewcommand{\baselinestretch}{1}

% Boxes
\usepackage{adjustbox}
\newlength{\strutheight}

% New commands
\newcommand{\mc}[3]{\multicolumn{#1}{#2}{#3}}
\newcommand{\mr}[2]{\multirow{#1}{*}{#2}}
\newcommand{\wtxt}[1]{{\color{grey0} #1}} % White text
\newcommand{\gtxt}[1]{{\color{grey6} #1}}

% New environments
% Section: section{picture}{title}{subtitle}
\renewenvironment{section}[3]
{
\vspace{2cm}
\begin{center}
  \begin{adjustbox}{minipage=\textwidth,center,bgcolor=grey1,trim=0cm 0cm 0cm -0.5cm}
    \vspace{-2.5cm}\hspace{0.5cm}\includegraphics[width=35mm]{#1}
    {\large \textbf{#2}}\\
    \hspace*{4.5cm}{\small \textit{#3}}

    \begin{adjustbox}{minipage=0.92\textwidth,valign=T,raise=\strutheight,left,margin=0.04\textwidth}
}
{
    \end{adjustbox}
  \end{adjustbox}
\end{center}
}

% General box: gbox{Guide Char}{Color}{title}
\newenvironment{gbox}[3]
{
\vspace{2cm}
\begin{center}
  \begin{adjustbox}{minipage=\textwidth,center,bgcolor=#2,trim=-0.7cm}
    \vspace{-2.5cm}\hspace{0.5cm}\tikz\draw[#2,fill=#2]
    (-2.5cm,0.5cm) circle (1.75cm) node[white] {#1};
    #3

    \def\temp{#3}\ifx\temp\empty
      \vspace{-1.7cm}
    \fi
    \begin{adjustbox}{minipage=0.92\textwidth,valign=T,raise=\strutheight,center}
}
{
    \end{adjustbox}
    \vspace{0.3cm}
  \end{adjustbox}
\end{center}
}